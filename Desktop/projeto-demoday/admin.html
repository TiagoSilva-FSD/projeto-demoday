<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Aprenda facil</title>
</head>

<body onload="auth()">
    <nav class="navbar navbar-expand-sm navbar-dark bg-secondary">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="mynavbar">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-primary" onclick="logout()">Logout</button>
                    </li>
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-success" onclick="backup()">Backup</button>
                    </li>
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-info" data-bs-toggle="modal"
                            data-bs-target="#myModal1">Collection</button>
                    </li>
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                            data-bs-target="#myModal2">Delete</button>
                    </li>
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                            data-bs-target="#myModal3">Drop</button>
                    </li>
                    <li class="nav-item p-2">
                        <button type="button" class="btn btn-danger" onclick="clearAllChat()">Clear</button>
                    </li>
                </ul>
                <form class="d-flex">
                    <input id="email_aluno" class="form-control me-2" type="text" placeholder="Email do aluno">
                    <button type="button" class="btn btn-primary" onclick="listar()">Listar</button>
                    <button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#myModal4"
                        onclick="listarAll()">All</button>
                </form>
                <button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#chatModal"
                    onclick="chatReceber()">
                    <span class="spinner-grow spinner-grow-sm"></span> Chat <span id="chat"
                        class="badge bg-danger">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- The Modal 1-->
    <div class="modal" id="myModal1">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Criar uma nova coleção</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <input type="text" id="collection1" class="form-control mb-1"
                        placeholder="Digite um nome para a coleção">
                    <input type="password" id="collection2" class="form-control"
                        placeholder="Digite uma senha para o administrador">
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-bs-dismiss="modal"
                        onclick="collection()">Executar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- The Modal 2-->
    <div class="modal" id="myModal2">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Deletar todos os usuários</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <input type="text" id="delete" class="form-control" placeholder="Digite o nome da coleção">
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                        onclick="deleteCol()">Executar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- The Modal 3-->
    <div class="modal" id="myModal3">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Apagar uma coleção</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <input type="text" id="drop" class="form-control" placeholder="Digite o nome da coleção">
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-dark" data-bs-dismiss="modal"
                        onclick="drop()">Executar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- The Modal 4-->
    <div class="modal" id="myModal4">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Email de todos os usuários.</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p id="alunos" class="text-center"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- The Modal Chat-->
    <div class="modal" id="chatModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 id="nomeAluno" class="modal-title">Nome do aluno</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p class="border p-2 chat">Caixa vazia</p>
                    <form onsubmit="chatEnvia()">
                        <div class="mb-3 mt-3">
                            <label for="comment">Enviar mensagem:</label>
                            <textarea class="form-control" rows="3" id="comment" name="text"></textarea>
                        </div>
                        <button type="submit" class="btn btn-outline-primary">Enviar</button>
                        <button type="button" class="btn btn-outline-danger" onclick="clearChat()">Clear</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-2">
        <div class="alert alert-success">
            <strong>Backup!</strong> Realiza um backup da coleção em arquivo json.
        </div>
        <div class="alert alert-info">
            <strong>Collection!</strong> Cria uma nova coleção no banco de dados.
        </div>
        <div class="alert alert-danger">
            <strong>Delete!</strong> Deleta todos os usuários da coleção! Processo irreversivel!
        </div>
        <div class="alert alert-dark">
            <strong>Drop!</strong> Apaga uma coleção do banco de dados! Processo irreversivel!
        </div>
        <div class="alert alert-danger">
            <strong>Clear!</strong> Apaga todas as mensagens do forum! Processo irreversivel!
        </div>
    </div>

    <div class="container mt-3 border">
        <div class="d-flex justify-content-center my-3">
            <div class="card" style="width:400px">
                <div id="user_status" class="card-header">Status: conta id: usuário</div>
                <img id="user_foto" class="card-img-top" src="imagem/login.png" alt="Card image" style="width:100%">
                <div class="card-body">
                    <h3 id="user_name" class="card-title">Name</h3>
                    <h4 id="user_email" class="card-text">Email</h4>
                    <h5 id="user_address" class="card-text">Address</h5>
                    <p>Frontend</p>
                    <div class="progress mb-1">
                        <div id="user_front" class="progress-bar" style="width:0%">0%</div>
                    </div>
                    <p>Backend</p>
                    <div class="progress mb-1">
                        <div id="user_back" class="progress-bar" style="width:0%">0%</div>
                    </div>
                </div>
                <div class="card-footer mx-auto">
                    <button id="bt_admin1" type="button" class="btn btn-primary" onclick="reativarUser()"
                        disabled>Reativar</button>
                    <button id="bt_admin2" type="button" class="btn btn-warning" onclick="desativarUser()"
                        disabled>Desativar</button>
                    <button id="bt_admin3" type="button" class="btn btn-danger" onclick="deletarUser()"
                        disabled>Deletar</button>
                    <button id="bt_admin4" type="button" class="btn btn-success" onclick="expertUser()"
                        disabled>EXP</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-2">
        <div class="alert alert-primary">
            <strong>Reativar!</strong> Ativa uma conta inativa.
        </div>
        <div class="alert alert-warning">
            <strong>Desativar!</strong> Deixa inativa uma conta ativa.
        </div>
        <div class="alert alert-danger">
            <strong>Deletar!</strong> Apaga a conta do banco de dados! Processo irreversivel!
        </div>
        <div class="alert alert-success">
            <strong>EXP!</strong> Promove um usuário a expert.
        </div>
    </div>

    <script src="admScript.js"></script>
</body>

</html>